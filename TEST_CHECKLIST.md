# mdvim v1.0.0 テストチェックリスト

## テスト環境

- [ ] Windows 11
- [ ] macOS
- [ ] Ubuntu 24.04

---

## 1. 起動・初期化

### 1.1 アプリケーション起動
- [ ] アプリが正常に起動する
- [ ] エディタにフォーカスが当たる
- [ ] Vimモードが有効になっている（ステータスバーに `-- NORMAL --` 表示）
- [ ] プレビューが右側に表示される

### 1.2 設定の読み込み
- [ ] 前回の設定（テーマ、フォントサイズ等）が復元される
- [ ] 設定ファイルがない場合、デフォルト設定で起動する

---

## 2. 基本編集機能

### 2.1 Vimモード
- [ ] `i` でインサートモードに入れる
- [ ] `Esc` でノーマルモードに戻れる
- [ ] `v` でビジュアルモードに入れる
- [ ] `V` でビジュアルラインモードに入れる
- [ ] `dd` で行削除できる
- [ ] `yy` で行コピーできる
- [ ] `p` でペーストできる
- [ ] `/` で検索できる
- [ ] `:w` で保存できる
- [ ] `:q` で終了できる
- [ ] `:wq` で保存して終了できる

### 2.2 Vimモード切り替え
- [ ] `Ctrl+`` でVimモードのON/OFFを切り替えられる
- [ ] ツールバーのボタンでVimモードを切り替えられる

### 2.3 日本語入力
- [ ] ノーマルモードで日本語入力しても誤動作しない
- [ ] インサートモードで日本語入力が正常にできる

---

## 3. ファイル操作

### 3.1 単一ファイル
- [ ] `:e` でファイルを開ける
- [ ] `:e <path>` で指定パスのファイルを開ける
- [ ] `:w` で上書き保存できる
- [ ] `:w <path>` で名前を付けて保存できる
- [ ] `Ctrl+O` でファイルを開ける
- [ ] `Ctrl+S` で保存できる
- [ ] `Ctrl+Shift+S` で名前を付けて保存できる

### 3.2 ファイルのドラッグ&ドロップ
- [ ] MDファイルをドロップするとプロジェクトに追加される
- [ ] 単一ファイルモードでMDをドロップするとプロジェクトモードに変換される
- [ ] TXTファイルをドロップすると.mdとしてプロジェクトに追加される
- [ ] 画像ファイルをドロップするとエディタに挿入される
- [ ] mdvimファイルをドロップするとプロジェクトが開かれる
- [ ] 未保存時にmdvimをドロップすると確認ダイアログが表示される

### 3.3 URLからの取得
- [ ] `:e https://...` でURLからMarkdownを取得できる
- [ ] `:imp https://...` でURLからMarkdownをインポートできる
- [ ] Qiita URLが正しく処理される
- [ ] GitHub raw URLが正しく処理される

---

## 4. プロジェクト管理

### 4.1 プロジェクト作成・保存
- [ ] `:project new` で新規プロジェクトを作成できる
- [ ] `:project new <name>` で名前付きプロジェクトを作成できる
- [ ] `:project save` でプロジェクトを保存できる（.mdvim形式）
- [ ] `:project close` でプロジェクトを閉じられる

### 4.2 プロジェクト読み込み
- [ ] `:project open` でプロジェクトを開ける
- [ ] .mdvim ファイルを正しく読み込める
- [ ] .mdebook ファイルを正しく読み込める
- [ ] mdbook形式（book.toml + src/）をインポートできる

### 4.3 ファイル管理
- [ ] `:vnew` で新規ファイルを作成できる
- [ ] `:vnew <name>` で名前付きファイルを作成できる
- [ ] `:bd` でファイルを削除できる（確認ダイアログあり）
- [ ] `:ren <name>` でファイル名を変更できる
- [ ] ダブルクリックでファイル名をインライン編集できる

### 4.4 バッファ操作
- [ ] `:bn` / `:bnext` で次のバッファに移動できる
- [ ] `:bp` / `:bprev` で前のバッファに移動できる
- [ ] `:b <name>` で指定バッファに移動できる
- [ ] `:ls` / `:buffers` でバッファ一覧が表示される
- [ ] タブクリックでファイルを切り替えられる

### 4.5 Explorerパネル
- [ ] `:Ex` / `:explorer` でExplorerパネルを表示/非表示できる
- [ ] ファイルツリーでファイルを選択できる
- [ ] ドラッグ&ドロップでファイル順序を変更できる

---

## 5. インポート機能

### 5.1 :imp コマンド
- [ ] `:imp` でインポートダイアログが開く
- [ ] `:imp <path>` でローカルファイルをインポートできる
- [ ] `:imp <url>` でURLからインポートできる
- [ ] プロジェクトモードではファイルが追加される
- [ ] 単一ファイルモードではプロジェクトモードに変換される

### 5.2 対応フォーマット
- [ ] .md ファイルをインポートできる
- [ ] .mdvim ファイルをインポートできる
- [ ] .mdebook ファイルをインポートできる

---

## 6. エクスポート機能

### 6.1 エクスポートダイアログ
- [ ] `:exp` でエクスポートダイアログが開く
- [ ] スコープ（Current Page / All Pages）を選択できる
- [ ] フォーマットを選択できる
- [ ] オプション（画像、目次、見出し番号）を設定できる

### 6.2 単一ページエクスポート
- [ ] `:exp md` でMarkdown（画像外部化）を出力できる
- [ ] `:exp md-inline` でMarkdown（画像インライン）を出力できる
- [ ] `:exp html` でHTMLを出力できる
- [ ] `:exp pdf` でPDFを出力できる

### 6.3 全ページエクスポート
- [ ] `:exp all md` でMDフォルダを出力できる
- [ ] `:exp all merge` で結合MDを出力できる
- [ ] `:exp all html` で単一HTMLを出力できる
- [ ] `:exp all html-multi` でHTMLサイトを出力できる
- [ ] `:exp all pdf` でPDFを出力できる
- [ ] `:exp mdbook` でmdbook形式を出力できる

### 6.4 進捗バー
- [ ] 全ページエクスポート時に進捗バーが表示される
- [ ] 進捗率が更新される
- [ ] 処理中のファイル名が表示される
- [ ] 完了後に進捗バーが閉じる

### 6.5 PDF出力品質
- [ ] 単一ページPDFが正しく出力される
- [ ] 長いコンテンツが複数ページに分割される
- [ ] 全ページPDFで各チャプターがページ分割される
- [ ] 画像が正しく埋め込まれる
- [ ] 数式（KaTeX）が正しく表示される

---

## 7. プレビュー機能

### 7.1 基本プレビュー
- [ ] Markdownがリアルタイムでプレビューされる
- [ ] 見出し（h1-h6）が正しく表示される
- [ ] リスト（箇条書き、番号付き）が正しく表示される
- [ ] コードブロックがシンタックスハイライトされる
- [ ] テーブルが正しく表示される
- [ ] リンクが正しく表示される

### 7.2 画像
- [ ] 埋め込み画像が表示される
- [ ] 画像サイズ指定（`![alt](url =100x)` 形式）が機能する
- [ ] クリップボードから画像を貼り付けられる（Ctrl+V）
- [ ] `:image` で画像を挿入できる

### 7.3 拡張Markdown
- [ ] チェックボックス（`- [ ]`, `- [x]`）が表示される
- [ ] 脚注が表示される
- [ ] ルビ（｜漢字《かんじ》）が表示される
- [ ] Qiita形式のノート（`:::note`）が表示される
- [ ] GitHub形式のノート（`> [!NOTE]`）が表示される

### 7.4 数式（KaTeX）
- [ ] インライン数式（`$...$`）が表示される
- [ ] ブロック数式（`$$...$$`）が表示される

### 7.5 Mermaid図
- [ ] Mermaid図が正しくレンダリングされる
- [ ] サイズ指定（`{width=80%}`）が機能する

### 7.6 表示モード
- [ ] `:view editor` でエディタのみ表示
- [ ] `:view split` で分割表示
- [ ] `:view preview` でプレビューのみ表示
- [ ] ツールバーボタンで表示モードを切り替えられる

---

## 8. 目次（TOC）

- [ ] `:toc` で目次パネルを表示/非表示できる
- [ ] 見出しが目次に反映される
- [ ] 目次項目をクリックすると該当位置にジャンプする
- [ ] 目次パネルをリサイズできる

---

## 9. 検索機能

### 9.1 プロジェクト内検索
- [ ] `:grep <pattern>` で全ファイルを検索できる
- [ ] `:search <pattern>` で全ファイルを検索できる
- [ ] 検索結果をクリックすると該当ファイル・位置に移動する

### 9.2 Vim検索
- [ ] `/pattern` で現在のファイル内を検索できる
- [ ] `n` で次の検索結果に移動できる
- [ ] `N` で前の検索結果に移動できる

---

## 10. 設定

### 10.1 テーマ
- [ ] `:theme dark` でダークテーマに切り替わる
- [ ] `:theme light` でライトテーマに切り替わる
- [ ] セレクタからテーマを変更できる

### 10.2 フォントサイズ
- [ ] `:set fontsize=N` でフォントサイズを変更できる
- [ ] ツールバーの +/- ボタンでサイズ変更できる

### 10.3 その他の設定
- [ ] `:set wrap` / `:set nowrap` で折り返しを切り替えられる
- [ ] `:set tabsize=N` でタブサイズを変更できる
- [ ] `:set number` / `:set nonumber` で行番号を切り替えられる
- [ ] `:set minimap` / `:set nominimap` でミニマップを切り替えられる
- [ ] `:set autosave` / `:set noautosave` で自動保存を切り替えられる

### 10.4 レイアウト
- [ ] `:layout default` でデフォルトレイアウトになる
- [ ] `:layout obsidian` でObsidian風レイアウトになる
- [ ] `:layout minimal` で最小レイアウトになる
- [ ] `:layout writer` でライターレイアウトになる
- [ ] `:layout code` でコードレイアウトになる

---

## 11. キーボードショートカット

- [ ] `Ctrl+O` - ファイルを開く
- [ ] `Ctrl+S` - 保存
- [ ] `Ctrl+Shift+S` - 名前を付けて保存
- [ ] `Ctrl+`` - Vimモード切り替え
- [ ] `Ctrl+B` - サイドバー切り替え
- [ ] `Ctrl+P` - プレビュー切り替え
- [ ] `F1` - ヘルプ表示
- [ ] `Escape` - モーダルを閉じる

---

## 12. CLI引数

- [ ] `mdvim file.md` でファイルを開ける
- [ ] `mdvim https://...` でURLからMarkdownを取得できる

---

## 13. エラーハンドリング

- [ ] 存在しないファイルを開こうとするとエラー表示
- [ ] 保存に失敗するとエラー表示
- [ ] 無効なURLでエラー表示
- [ ] ネットワークエラー時にエラー表示

---

## 14. パフォーマンス

- [ ] 大きなファイル（1MB以上）を開ける
- [ ] 多数のファイル（50+）を含むプロジェクトを開ける
- [ ] 長時間使用してもメモリリークがない

---

## 15. 文字エンコーディング

- [ ] UTF-8ファイルを正しく読み込める
- [ ] Shift-JISファイルを正しく読み込める
- [ ] EUC-JPファイルを正しく読み込める
- [ ] UTF-8で保存される

---

## テスト結果サマリー

| カテゴリ | 合格 | 不合格 | 未テスト |
|----------|------|--------|----------|
| 起動・初期化 | | | |
| 基本編集機能 | | | |
| ファイル操作 | | | |
| プロジェクト管理 | | | |
| インポート機能 | | | |
| エクスポート機能 | | | |
| プレビュー機能 | | | |
| 目次（TOC） | | | |
| 検索機能 | | | |
| 設定 | | | |
| キーボードショートカット | | | |
| CLI引数 | | | |
| エラーハンドリング | | | |
| パフォーマンス | | | |
| 文字エンコーディング | | | |

---

## 発見した不具合

| # | 症状 | 再現手順 | 重要度 |
|---|------|----------|--------|
| | | | |

---

## 備考

- テスト日: 
- テスター: 
- ビルド: `npm run tauri build`
- 開発モード: `npm run tauri dev`
